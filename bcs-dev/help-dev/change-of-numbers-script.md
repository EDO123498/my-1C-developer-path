```js
//Обязательные параметры:
//Указываем номера документов через | ("123,567")
пНомераДокументов = "624121|624122|";
//Указываем тип документа (как в конфигураторе)
пТипДокумента = "ЗакрытиеРеестра";
//Указываем свой код из справочника пользователи (пользователь под кем заводились документы в текущую базу)
пАвтор = Справочники.Пользователи.НайтиПоКоду("1098");
//Указываем номер задачи
пЗадача = "BROKERSUP-36906";
//
пПризнакДокумента = Ложь;
Если пТипДокумента = "ЗапросНаРаскрытиеРеестра" Тогда
	пПризнакДокумента = Истина;	
КонецЕсли;

пМассив = СтрРазделить(пНомераДокументов, "|", Ложь);
//преобразование к типу число
пСписок = Новый Массив;
Для Каждого Строка Из пМассив Цикл
	пСписок.Добавить(Число(Строка));		
КонецЦикла;

пДата = Год(ТекущаяДата());

ТекстЗапроса = "ВЫБРАТЬ
|	НазваниеДокумента.Ссылка КАК Ссылка
|ИЗ
|	Документ.НазваниеДокумента КАК НазваниеДокумента
|ГДЕ
|	НазваниеДокумента.Автор = &Автор
|	И НазваниеДокумента.Номер В(&Список)
|	И ГОД(НазваниеДокумента.Дата) = &Дата
|	И НЕ НазваниеДокумента.ПометкаУдаления"; 

Запрос = Новый Запрос;
Запрос.Текст = СтрЗаменить(ТекстЗапроса, "НазваниеДокумента", пТипДокумента);
Запрос.УстановитьПараметр("Автор", пАвтор);
Запрос.УстановитьПараметр("Список", ?(пПризнакДокумента, пМассив, пСписок));
Запрос.УстановитьПараметр("Дата", пДата);

РезультатЗапроса = Запрос.Выполнить();
ВыборкаДетальныеЗаписи = РезультатЗапроса.Выгрузить();
Протокол = Новый ТаблицаЗначений;
Протокол.Колонки.Добавить("Документ");
Протокол.Колонки.Добавить("Номер_old");
Протокол.Колонки.Добавить("Номер_new");

Для Каждого Строка Из ВыборкаДетальныеЗаписи Цикл
	//да-да, запрос в цикле \(-_-)/
	ЗапросНомера = Новый Запрос;
	ТекстЗапроса = "ВЫБРАТЬ
	|	МАКСИМУМ(НазваниеДокумента.Номер) КАК Номер
	|ИЗ
	|	Документ.НазваниеДокумента КАК НазваниеДокумента";
	ЗапросНомера.Текст = СтрЗаменить(ТекстЗапроса, "НазваниеДокумента", пТипДокумента);
	
	РезультатЗапроса = ЗапросНомера.Выполнить();
	ВыборкаДетальныеЗаписи1 = РезультатЗапроса.Выгрузить();
	пМаксимальныйНомер = Число(ВыборкаДетальныеЗаписи1[0].Номер);
	пНовыйНомер = пМаксимальныйНомер + 1;	
	
	Попытка 	
		пДокументСсылка = Строка.Ссылка;
		пСтарыйНомер = пДокументСсылка.Номер; 
		пДокументОбъект = пДокументСсылка.ПолучитьОбъект();
		пДокументОбъект.Номер = ?(пПризнакДокумента, СтрЗаменить(Строка(пНовыйНомер), Символы.НПП, ""), пНовыйНомер);
		пДокументОбъект.ОбменДанными.Загрузка = Истина;
		пДокументОбъект.Записать(РежимЗаписиДокумента.Запись);
		
		пСтрокаЛога = СтрШаблон("Изменен номер документа %1 по задаче %2: старый номер --> %3, текущий номер --> %4",
                                        пДокументОбъект.Ссылка, пЗадача, пСтарыйНомер, пНовыйНомер);
		
		СообщитьЛог(пСтрокаЛога,, пДокументОбъект.Ссылка, "Скрипты", Ложь);
		
		пНоваяСтрокаТЗ = Протокол.Добавить();
		пНоваяСтрокаТЗ.Документ = пДокументОбъект.Ссылка; 
		пНоваяСтрокаТЗ.Номер_old = пСтарыйНомер;  
		пНоваяСтрокаТЗ.Номер_new = пДокументОбъект.Номер;
		
	Исключение
		Сообщить(пДокументСсылка + ". " + ОписаниеОшибки());	
	КонецПопытки;
	
КонецЦикла;
ПечатьТЗ(Протокол);
```
